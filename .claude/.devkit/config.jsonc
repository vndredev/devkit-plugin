{
  "$schema": "./config.schema.json",

  // ============================================================================
  // IDENTITY - Project information
  // ============================================================================
  "project": {
    "name": "devkit-plugin",
    "type": "python",
    "version": "0.2.0"
  },

  // ============================================================================
  // DEVELOPMENT - Git and GitHub configuration
  // ============================================================================
  "git": {
    "protected_branches": ["main"],
    "conventions": {
      "types": ["feat", "fix", "chore", "refactor", "test", "docs", "perf", "ci"],
      "scopes": {
        "mode": "strict",      // strict=error, warn=warning, off=disabled
        "allowed": [],         // Project-specific scopes
        "internal": ["internal", "review", "ci", "deps"]  // Skip release notes
      },
      "branch_pattern": "{type}/{description}"
    }
  },

  "github": {
    "url": "https://github.com/vndredev/devkit-plugin",
    "visibility": "public",
    "pr": {
      "auto_merge": true,      // Enable auto-merge when PR is created
      "delete_branch": true,   // Delete branch after merge
      "merge_method": "squash" // squash, merge, or rebase
    }
  },

  // ============================================================================
  // QUALITY - Linters and testing
  // ============================================================================
  "linters": {
    "preset": "strict",        // strict, relaxed, minimal
    "overrides": {}
  },

  "testing": {
    "enabled": false,
    "framework": "pytest"
  },

  // ============================================================================
  // AUTOMATION - Hooks and changelog
  // ============================================================================
  "hooks": {
    // === Session Hook (SessionStart) ===
    "session": {
      "enabled": true,
      "show_git_status": true,
      "prompts": {
        "branch": "üìç {branch}",
        "staged": "‚ö°{count} staged",
        "modified": "‚úèÔ∏è{count} modified",
        "untracked": "‚ùì{count} untracked",
        "hint": "Use `/dk` for commands, `/dk dev` for workflow",
        "system_warning": "‚ö†Ô∏è Project has issues - check with /dk plugin check"
      }
    },

    // === Validate Hook (PreToolUse: Bash) ===
    "validate": {
      "enabled": true,
      "block_force_push": true,
      "block_dangerous_gh": true,
      "prompts": {
        "branch_invalid": "Branch '{branch}' should match: {pattern}",
        "commit_invalid": "Commit should match: type(scope): message (types: {types})",
        "scope_invalid": "Unknown scope '{scope}'. Allowed: {allowed}",
        "force_push_blocked": "Force push is blocked. Use --force-with-lease if needed.",
        "gh_blocked": "Blocked: '{cmd}' - too dangerous for automatic execution",
        "pr_missing_body": "gh pr create requires --body with PR template"
      }
    },

    // === Format Hook (PostToolUse: Write/Edit) ===
    "format": {
      "enabled": true,
      "auto_format": true,
      "arch_check": true,
      "auto_sync_arch": true,
      "prompts": {
        "formatted": "‚úì Formatted: {file}",
        "test_reminder": "üí° New file - consider adding: tests/{file}",
        "arch_violation": "‚ö†Ô∏è Arch violation: {message}",
        "arch_synced": "üìÑ Updated docs/ARCHITECTURE.md"
      }
    },

    // === Plan Hook (PostToolUse: ExitPlanMode) ===
    "plan": {
      "enabled": true,
      "prompts": {
        "header": "## Implementation Phase",
        "instructions": [
          "Complete one task at a time, mark done in todo list",
          "Run linters after code changes",
          "Run tests if available",
          "Use conventional commits: type(scope): message",
          "Ask if blocked or unclear"
        ],
        "type_hints": {
          "python": "üí° Use `uv run pytest` for tests, `uv run ruff check` for linting",
          "nextjs": "üí° Use `npm test` for tests, `npm run lint` for linting",
          "node": "üí° Use `npm test` for tests, `npm run lint` for linting"
        }
      }
    }
  },

  "changelog": {
    "audience": "developer"    // developer=technical, user=simple
  },

  // ============================================================================
  // ARCHITECTURE - Layer configuration (Clean Architecture)
  // ============================================================================
  "arch": {
    "layers": {
      "core": {
        "tier": 0,
        "patterns": ["src/core/**"],
        "description": "Types, errors, constants - nur stdlib"
      },
      "lib": {
        "tier": 1,
        "patterns": ["src/lib/**"],
        "description": "I/O-Adapter: config, git, tools, sync"
      },
      "arch": {
        "tier": 2,
        "patterns": ["src/arch/**"],
        "description": "Architecture-Analyse und Visualisierung"
      },
      "events": {
        "tier": 3,
        "patterns": ["src/events/**"],
        "description": "Claude Code Hook-Handler"
      }
    }
  },

  // ============================================================================
  // MANAGED FILES - Auto-generated files manifest
  // ============================================================================
  "managed": {
    "linters": {
      ".markdownlint.json": {
        "template": "linters/common/markdownlint.json.template",
        "enabled": true
      },
      ".markdownlintignore": {
        "template": "gitignore/markdownlint.ignore",
        "enabled": true
      },
      "ruff.toml": {
        "template": "linters/python/ruff.toml.template",
        "enabled": true
      }
    },
    "github": {
      ".github/workflows/claude.yml": {
        "template": "github/workflows/claude.yml.template",
        "enabled": true
      },
      ".github/workflows/claude-code-review.yml": {
        "template": "github/workflows/claude-code-review.yml.template",
        "enabled": true
      },
      ".github/ISSUE_TEMPLATE/bug_report.yml": {
        "template": "github/ISSUE_TEMPLATE/bug_report.yml.template",
        "enabled": true
      },
      ".github/ISSUE_TEMPLATE/feature_request.yml": {
        "template": "github/ISSUE_TEMPLATE/feature_request.yml.template",
        "enabled": true
      },
      ".github/ISSUE_TEMPLATE/config.yml": {
        "template": "github/ISSUE_TEMPLATE/config.yml.template",
        "enabled": true
      },
      ".github/PULL_REQUEST_TEMPLATE.md": {
        "template": "github/PULL_REQUEST_TEMPLATE.md.template",
        "enabled": true
      },
      ".github/workflows/release.yml": {
        "template": "github/workflows/release-python.yml.template",
        "enabled": true
      }
    },
    "docs": {
      "README.md": {
        "type": "auto_sections",  // Template + CUSTOM sections
        "enabled": true
      },
      "CLAUDE.md": {
        "type": "auto_sections",  // auto_sections preserves CUSTOM blocks
        "enabled": true
      },
      "docs/ARCHITECTURE.md": {
        "type": "auto_generate",  // 100% generated from config
        "enabled": true
      },
      "docs/PLUGIN.md": {
        "type": "template",       // 100% from plugin template
        "template": "docs/PLUGIN.md.template",
        "enabled": false          // Disabled for devkit-plugin (it's the source)
      }
    },
    "ignore": {
      ".gitignore": {
        "template": [
          "gitignore/common.gitignore",
          "gitignore/python.gitignore"
        ],
        "enabled": true
      }
    }
  }
}
